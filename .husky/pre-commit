#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged for backend
echo " Running backend lint-staged..."
cd backend && npx lint-staged
BACKEND_EXIT=$?

# Go back to root
cd ..

# Run lint-staged for frontend
echo " Running frontend lint-staged..."
cd frontend && npx lint-staged
FRONTEND_EXIT=$?

# Exit with error if either failed
if [ $BACKEND_EXIT -ne 0 ] || [ $FRONTEND_EXIT -ne 0 ]; then
  echo " Pre-commit checks failed!"
  exit 1
fi

echo " Pre-commit checks passed!"
exit 0
